<!DOCTYPE html>
<html lang="en">
<head>
<!-- HTML header for doxygen 1.8.18 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cross Check Tool - OpenVINO™ Toolkit</title>
<!-- <script type="text/javascript" src="jquery.js?v=405cebc51c254c8b400f2a138dc8f9b3"></script> -->
<!-- JQuery 2.2.4 -->
<script src="jquery-2.2.4.min.js?v=405cebc51c254c8b400f2a138dc8f9b3"></script>
<script type="text/javascript" src="dynsections.js?v=405cebc51c254c8b400f2a138dc8f9b3"></script>
<!-- Bootstrap 4.4.1 -->
<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" rel="stylesheet"
    type="text/css" />
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js?v=405cebc51c254c8b400f2a138dc8f9b3"
    type="text/javascript"></script>
<!--  -->
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="/assets/versions_raw.js?v=405cebc51c254c8b400f2a138dc8f9b3"></script>
<script type="text/javascript" src="/assets/openvino-versions_2.js?v=405cebc51c254c8b400f2a138dc8f9b3"></script>
<script type="text/javascript" src="openvino-layout.js?v=405cebc51c254c8b400f2a138dc8f9b3"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/viewerjs/1.6.2/viewer.css" integrity="sha512-Fd7AWkSYX3RBadbJlBrETnOyX5tkcQu2oN+nO11c+kewdhPlNWQ1Hj83W3hN1odgyh+k7rpvvv7IxZq9bRomCg==" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/viewerjs/1.6.2/viewer.min.js?v=405cebc51c254c8b400f2a138dc8f9b3" integrity="sha512-VzJLwaOOYyQemqxRypvwosaCDSQzOGqmBFRrKuoOv7rF2DZPlTaamK1zadh7i2FRmmpdUPAE/VBkCwq2HKPSEQ==" crossorigin="anonymous"></script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
  <div id="projectalign">
   <div id="projectname">
     <a href="<domain_placeholder>" class="homelink-id">
       <img src="/assets/images/int-openvino-wht.svg" alt="OpenVINO™ Toolkit">
       <p>Documentation</p>
      </a>
    </div>
  </div>
</div>
<div id="secondnav">
    <div id="versionsSelector" class="nav-placeholder"></div>
    <div id="download-link" class="nav-placeholder"></div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js?v=be771e6d3b47d3e8b7f9ce6a7ab6b839"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Cross Check Tool </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Cross Check Tool is a console application that enables comparing accuracy and performance metrics for two successive model inferences that are performed on two different supported Intel&reg; devices or with different precisions. The Cross Check Tool can compare the metrics per layer or all over the model.</p>
<h2>Running the Cross Check Tool</h2>
<p>Cross Check Tool is distributed as a Python module and there is no need to build it. To run the Cross Check Tool, execute the <code>cross_check_tool.py</code> file with necessary parameters. Please note that the Inference Engine assumes that weights are in the same folder as the <code>.xml</code> file.</p>
<p>You can get the list of all available options using the <code>-h</code> option:</p>
<div class="fragment"><div class="line">$python3 cross_check_tool.py -h</div>
<div class="line"> </div>
<div class="line">Cross Check Tool is a console application that enables comparing accuracy and</div>
<div class="line">provides performance metrics</div>
<div class="line"> </div>
<div class="line">optional arguments:</div>
<div class="line">  -h, --help            show this help message and exit</div>
<div class="line"> </div>
<div class="line">Model specific arguments:</div>
<div class="line">  --input INPUT, -i INPUT</div>
<div class="line">                        Path to an input image file or multi-input file to</div>
<div class="line">                        infer. Generates input(s) from normal distribution if</div>
<div class="line">                        empty</div>
<div class="line">  --batch BATCH, -b BATCH</div>
<div class="line">                        Overrides batch size. Default is inherited from model</div>
<div class="line">  --model MODEL, -m MODEL</div>
<div class="line">                        Path to an .xml file that represents the first IR of</div>
<div class="line">                        the trained model to infer.</div>
<div class="line">  --reference_model REFERENCE_MODEL, -ref_m REFERENCE_MODEL</div>
<div class="line">                        Path to an .xml file that represents the second IR in</div>
<div class="line">                        different precision to compare the metrics.</div>
<div class="line">  --layers LAYERS, -layers LAYERS</div>
<div class="line">                        Defines layers to check. Options: all, None - for</div>
<div class="line">                        output layers check, list of comma-separated layer</div>
<div class="line">                        names to check. Default value is None.</div>
<div class="line">  --mapping MAPPING, -map MAPPING</div>
<div class="line">                        Model Optimizer provided mapping for --model/-m</div>
<div class="line">  --reference_mapping REFERENCE_MAPPING, -ref_map REFERENCE_MAPPING</div>
<div class="line">                        Model Optimizer provided mapping for</div>
<div class="line">                        --reference_model/-ref_model</div>
<div class="line">  --num_of_iterations NUM_OF_ITERATIONS, -ni NUM_OF_ITERATIONS</div>
<div class="line">                        Number of iterations to collect all over the net</div>
<div class="line">                        performance</div>
<div class="line"> </div>
<div class="line">Plugin specific arguments:</div>
<div class="line">  --plugin_path PLUGIN_PATH, -pp PLUGIN_PATH</div>
<div class="line">                        Path to a plugin folder.</div>
<div class="line">  --device DEVICE, -d DEVICE</div>
<div class="line">                        The first target device to infer the model specified</div>
<div class="line">                        with the -m or --model option. CPU, GPU, HDDL or</div>
<div class="line">                        MYRIAD are acceptable.</div>
<div class="line">  --config CONFIG, -conf CONFIG</div>
<div class="line">                        Path to config file for -d or -device device plugin</div>
<div class="line">  --reference_device REFERENCE_DEVICE, -ref_d REFERENCE_DEVICE</div>
<div class="line">                        The second target device to infer the model and</div>
<div class="line">                        compare the metrics. CPU, GPU, HDDL or MYRIAD are</div>
<div class="line">                        acceptable.</div>
<div class="line">  --reference_config REFERENCE_CONFIG, -ref_conf REFERENCE_CONFIG</div>
<div class="line">                        Path to config file for -ref_d or -reference_device</div>
<div class="line">                        device plugin</div>
<div class="line">  -l L                  Required for MKLDNN (CPU)-targeted custom layers.</div>
<div class="line">                        Comma separated paths to a shared libraries with the</div>
<div class="line">                        kernels implementation.</div>
<div class="line"> </div>
<div class="line">CCT mode arguments:</div>
<div class="line">  --dump                Enables blobs statistics dumping</div>
<div class="line">  --load LOAD           Path to a file to load blobs from</div>
</div><!-- fragment --><h3>Examples</h3>
<ol type="1">
<li><p class="startli">To check per-layer accuracy and performance of inference in FP32 precision on the CPU against the GPU, run: </p><div class="fragment"><div class="line">$python3 cross_check_tool.py -i &lt;path_to_input_image_or_multi_input_file&gt; \</div>
<div class="line">              -m &lt;path_to_FP32_xml&gt;                            \</div>
<div class="line">              -d GPU                                           \</div>
<div class="line">              -ref_d CPU                                       \</div>
<div class="line">              --layers all</div>
</div><!-- fragment --><p class="startli">The output looks as follows: </p><div class="fragment"><div class="line">[ INFO ] Cross check with one IR was enabled</div>
<div class="line">[ INFO ] GPU:FP32 vs CPU:FP32</div>
<div class="line">[ INFO ] The same IR on both devices: &lt;path_to_IR&gt; </div>
<div class="line">[ INFO ] Statistics will be dumped for X layers: &lt;layer_1_name&gt;, &lt;layer_2_name&gt;, ... , &lt;layer_X_name&gt;</div>
<div class="line">[ INFO ] Layer &lt;layer_1_name&gt; statistics </div>
<div class="line">     Max absolute difference : 1.15204E-03</div>
<div class="line">     Min absolute difference : 0.0</div>
<div class="line">     Max relative difference : 1.15204E+17</div>
<div class="line">     Min relative difference : 0.0</div>
<div class="line">     Min reference value : -1.69513E+03</div>
<div class="line">     Min absolute reference value : 2.71080E-06</div>
<div class="line">     Max reference value : 1.17132E+03</div>
<div class="line">     Max absolute reference value : 1.69513E+03</div>
<div class="line">     Min actual value : -1.69513E+03</div>
<div class="line">     Min absolute actual value : 8.66465E-05</div>
<div class="line">     Max actual value : 1.17132E+03</div>
<div class="line">     Max absolute actual value : 1.69513E+03</div>
<div class="line">       Device:           -d GPU       -ref_d CPU</div>
<div class="line">       Status:    OPTIMIZED_OUT    OPTIMIZED_OUT</div>
<div class="line">       Layer type:      Convolution      Convolution</div>
<div class="line">     Real time, microsec:     0              120</div>
<div class="line">       Number of NAN:         0                0</div>
<div class="line">       Number of INF:         0                0</div>
<div class="line">       Number of ZERO:        0                0</div>
<div class="line"> ...</div>
<div class="line">&lt;list_of_layer_statistics&gt;</div>
<div class="line">...</div>
<div class="line"> </div>
<div class="line">[ INFO ] Overall max absolute difference = 0.00115203857421875</div>
<div class="line">[ INFO ] Overall min absolute difference = 0.0</div>
<div class="line">[ INFO ] Overall max relative difference = 1.1520386483093504e+17</div>
<div class="line">[ INFO ] Overall min relative difference = 0.0</div>
<div class="line">[ INFO ] Execution successful</div>
</div><!-- fragment --></li>
<li><p class="startli">To check the overall accuracy and performance of inference on the CPU in FP32 precision against the Intel&reg; Movidius&trade; Myriad&trade; device in FP16 precision, run: </p><div class="fragment"><div class="line">$python3 cross_check_tool.py    -i &lt;path_to_input_image_or_multi_input_file&gt; \</div>
<div class="line">                -m &lt;path_to_FP16_xml&gt;                        \</div>
<div class="line">                -d MYRIAD                                    \</div>
<div class="line">                -ref_m &lt;path_to_FP32_xml&gt;                    \</div>
<div class="line">                -ref_d CPU                                   </div>
</div><!-- fragment --><p class="startli">The output looks as follows: </p><div class="fragment"><div class="line">[ INFO ] Cross check with two IRs was enabled</div>
<div class="line">[ INFO ] GPU:FP16 vs CPU:FP32</div>
<div class="line">[ INFO ] IR for MYRIAD : &lt;path_to_FP16_xml&gt;</div>
<div class="line">[ INFO ] IR for CPU : &lt;path_to_FP32_xml&gt;</div>
<div class="line">[ INFO ] Statistics will be dumped for 1 layer: &lt;output_layer_name(s)&gt;</div>
<div class="line">[ INFO ] Layer &lt;output_layer_name&gt; statistics </div>
<div class="line">     Max absolute difference : 2.32944E-02</div>
<div class="line">     Min absolute difference : 3.63002E-13</div>
<div class="line">     Max relative difference : 6.41717E+10</div>
<div class="line">     Min relative difference : 1.0</div>
<div class="line">     Min reference value : 3.63002E-13</div>
<div class="line">     Min absolute reference value : 3.63002E-13</div>
<div class="line">     Max reference value : 7.38138E-01</div>
<div class="line">     Max absolute reference value : 7.38138E-01</div>
<div class="line">     Min actual value : 0.0</div>
<div class="line">     Min absolute actual value : 0.0</div>
<div class="line">     Max actual value : 7.14844E-01</div>
<div class="line">     Max absolute actual value : 7.14844E-01</div>
<div class="line">       Device:        -d MYRIAD       -ref_d CPU</div>
<div class="line">       Status:    OPTIMIZED_OUT    OPTIMIZED_OUT</div>
<div class="line">       Layer type:          Reshape          Reshape</div>
<div class="line">     Real time, microsec:      0                0</div>
<div class="line">       Number of NAN:          0                0</div>
<div class="line">       Number of INF:          0                0</div>
<div class="line">       Number of ZERO:         0                0</div>
<div class="line">----------------------------------------------------------------------</div>
<div class="line">  Overall performance, microseconds:      2.79943E+05      6.24670E+04</div>
<div class="line">----------------------------------------------------------------------</div>
<div class="line">[ INFO ] Overall max absolute difference = 0.023294448852539062</div>
<div class="line">[ INFO ] Overall min absolute difference = 3.630019191052519e-13</div>
<div class="line">[ INFO ] Overall max relative difference = 64171696128.0</div>
<div class="line">[ INFO ] Overall min relative difference = 1.0</div>
<div class="line">[ INFO ] Execution successful</div>
</div><!-- fragment --></li>
<li><p class="startli">To dump layer statistics from a specific list of layers, run: </p><div class="fragment"><div class="line">$python3 cross_check_tool.py    -i &lt;path_to_input_image_or_multi_input_file&gt; \</div>
<div class="line">                -m &lt;path_to_FP16_xml&gt;                        \</div>
<div class="line">                -d MYRIAD                                    \</div>
<div class="line">                --dump                                       \</div>
<div class="line">                --layers &lt;comma_separated_list_of_layers&gt;</div>
</div><!-- fragment --><p class="startli">The output looks as follows: </p><div class="fragment"><div class="line">[ INFO ] Dump mode was enabled</div>
<div class="line">[ INFO ] &lt;layer_1_name&gt; layer processing</div>
<div class="line">...</div>
<div class="line">[ INFO ] &lt;layer_X_name&gt; layer processing</div>
<div class="line">[ INFO ] Dump file path: &lt;path_where_dump_will_be_saved&gt;</div>
<div class="line">[ INFO ] Execution successful</div>
</div><!-- fragment --><p class="startli">If you do not provide the <code>-i</code> key, the Cross Check Tool generates an input from normal distributed noise and saves it in a multi-input file format with the filename <code>&lt;path_to_xml&gt;_input_layers_dump.txt</code> in the same folder as the Intermediate Representation (IR).</p>
</li>
<li><p class="startli">To check the overall accuracy and performance of inference on the CPU in FP32 precision against dumped results, run: </p><div class="fragment"><div class="line">$python3 cross_check_tool.py    -i &lt;path_to_input_image_or_multi_input_file&gt; \</div>
<div class="line">                -m &lt;path_to_FP32_xml&gt;                        \</div>
<div class="line">                -d CPU                                       \</div>
<div class="line">                --load &lt;path_to_dump&gt;                        \</div>
<div class="line">                --layers all</div>
</div><!-- fragment --><p class="startli">The output looks as follows: </p><div class="fragment"><div class="line">[ INFO ] Load mode was enabled</div>
<div class="line">[ INFO ] IR for CPU : &lt;path_to_FP32_xml&gt;</div>
<div class="line">[ INFO ] Loading blob from /localdisk/models/FP16/icv_squeezenet_v1.0.xml_GPU_dump.npz</div>
<div class="line">[ INFO ] Statistics will be dumped for X layers:  &lt;layer_1_name&gt;, &lt;layer_2_name&gt;, ... , &lt;layer_X_name&gt;</div>
<div class="line">[ INFO ] Layer &lt;layer_1_name&gt; statistics</div>
<div class="line">     Max absolute difference : 0.0</div>
<div class="line">     Min absolute difference : 0.0</div>
<div class="line">     Max relative difference : 0.0</div>
<div class="line">     Min relative difference : 0.0</div>
<div class="line">     Min reference value : 0.0</div>
<div class="line">     Min absolute reference value : 0.0</div>
<div class="line">     Max reference value : 7.14844E-01</div>
<div class="line">     Max absolute reference value : 7.14844E-01</div>
<div class="line">     Min actual value : 0.0</div>
<div class="line">     Min absolute actual value : 0.0</div>
<div class="line">     Max actual value : 7.14844E-01</div>
<div class="line">     Max absolute actual value : 7.14844E-01</div>
<div class="line">       Device:           -d CPU        -load GPU</div>
<div class="line">       Status:    OPTIMIZED_OUT    OPTIMIZED_OUT</div>
<div class="line">       Layer type:          Reshape          Reshape</div>
<div class="line">     Real time, microsec:      0                0</div>
<div class="line">       Number of NAN:          0                0</div>
<div class="line">       Number of INF:          0                0</div>
<div class="line">       Number of ZERO:        609              699</div>
<div class="line"> </div>
<div class="line">...</div>
<div class="line">&lt;list_of_layer_statistics&gt;</div>
<div class="line">...</div>
<div class="line">            </div>
<div class="line">[ INFO ] Overall max absolute difference = 0.0</div>
<div class="line">[ INFO ] Overall min absolute difference = 0.0</div>
<div class="line">[ INFO ] Overall max relative difference = 0.0</div>
<div class="line">[ INFO ] Overall min relative difference = 0.0</div>
<div class="line">[ INFO ] Execution successful</div>
</div><!-- fragment --></li>
</ol>
<h3>Multi-input and dump file format</h3>
<p>Multi-input and dump file is a numpy compressed <code>.npz</code> file with hierarchy:</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  ‘layer_name’: {</div>
<div class="line">    ‘blob’: np.array([…])</div>
<div class="line">    ‘pc’: {</div>
<div class="line">      ‘device’: ‘device_name’,</div>
<div class="line">      ‘real_time’: int_real_time_in_microseconds_from_plugin,</div>
<div class="line">      ‘exec_type’: ‘exec_type_from_plugin’,</div>
<div class="line">      ‘layer_type’: ‘layer_type_from_plugin’,</div>
<div class="line">      ‘status’: ‘status_from_plugin’</div>
<div class="line">    }</div>
<div class="line">  },</div>
<div class="line">  ‘another_layer_name’: {</div>
<div class="line">    ‘blob’: np.array([…])</div>
<div class="line">    ‘pc’: {</div>
<div class="line">      ‘device’: ‘device_name’,</div>
<div class="line">      ‘real_time’: int_real_time_in_microseconds_from_plugin,</div>
<div class="line">      ‘exec_type’: ‘exec_type_from_plugin’,</div>
<div class="line">      ‘layer_type’: ‘layer_type_from_plugin’,</div>
<div class="line">      ‘status’: ‘status_from_plugin’</div>
<div class="line">    }</div>
<div class="line">  },</div>
<div class="line">  ...</div>
<div class="line">}</div>
</div><!-- fragment --><h3>Configuration file</h3>
<p>There is an option to pass configuration file to plugin by providing <code>--config</code> and/or <code>--reference_config</code> keys.</p>
<p>Configuration file is a text file with content of pairs of keys and values.</p>
<p>Structure of configuration file:</p>
<div class="fragment"><div class="line">KEY VALUE</div>
<div class="line">ANOTHER_KEY ANOTHER_VALUE,VALUE_1</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
    <div class="footer">
      <div id="nav-path" class="navpath"></div>
      <div class="footer-content">
        <div class="opt-notice">For more complete information about compiler optimizations, see our 
        <a class="el" href="https://software.intel.com/articles/optimization-notice">Optimization Notice</a>
        </div>
        <div class="footer-row">
          <ul>
            <li><a href="https://software.intel.com/en-us/forums/computer-vision">Support</a></li>
            <li><a href="/<version_placeholder>/openvino_docs_Legal_Information.html">Legal Information</a></li>
            <li><a href="https://www.intel.com/content/www/us/en/privacy/intel-cookie-notice.html">Cookies and Similar Technologies Notice</a></li>
          </ul>
        </div>
      </div>
    </div>
  </body>
</html>